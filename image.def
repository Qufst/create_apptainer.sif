Bootstrap: docker
From: alpine

%help
    Container with Micromamba on Alpine Linux.

%environment
    export PATH=/opt/miniconda/bin:${PATH}
    conda activate myenv

%post -c /bin/bash
    apk update && apk add --no-cache \
        bash \
        curl \
        wget \

    INSTALL_SCRIPT=Miniconda3-py38_4.9.2-Linux-x86_64.sh
    wget -O opt/environment.yml https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/environment.yml
    wget https://repo.anaconda.com/miniconda/${INSTALL_SCRIPT}
    bash ${INSTALL_SCRIPT} -b -p /opt/miniconda3
    rm ${INSTALL_SCRIPT}
    conda env create -n myenv -f environment.yml
    conda update --all






