Bootstrap: docker
From: alpine:latest

%labels
    AUTHOR Quentin Festor
    VERSION 1.0
    DESCRIPTION "test de cr√©ation de sif pour computo"

%post
    apk add wget tar bzip2 bash curl
    ls -la
    wget -O opt/environment.yml https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/environment.yml
    wget -O opt/install.sh https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/install.sh
    chmod -R ugo+rwx opt/install.sh
    bash opt/install.sh
    ls -la opt/
    opt/micromamba shell hook --shell
    opt/micromamba create -y -n myenv -f opt/environment.yml

%environment
    opt/micromamba activate myenv

%help
    Utilisation : apptainer run image.sif --option
