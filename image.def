Bootstrap: docker
From: alpine:latest

%labels
    AUTHOR Quentin Festor
    VERSION 1.0
    DESCRIPTION "test de cr√©ation de sif pour computo"

%post
    apk add wget tar bzip2 bash curl
    ls -la
    wget -O /root/environment.yml https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/environment.yml
    wget -O /root/install.sh https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/install.sh
    bash /root/install.sh
    ls -la /root/.local/bin/
    /root/.local/bin/micromamba shell hook --shell
    /root/.local/bin/micromamba create -y -n myenv -f /root/environment.yml

%environment
    export HOME=/root
    micromamba activate myenv

%help
    Utilisation : apptainer run image.sif --option
