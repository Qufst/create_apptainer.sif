Bootstrap: docker
From: alpine:latest

%labels
    AUTHOR Quentin Festor
    VERSION 1.0
    DESCRIPTION "test de cr√©ation de sif pour computo"

%post
    apk add wget tar bzip2 bash curl
    wget -O environment.yml https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/environment.yml

    wget -O install.sh https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/install.sh
    bash install.sh
    ls -la ${HOME}/.local/bin/
    ${HOME}/.local/bin/micromamba shell hook --shell
    ${HOME}/.local/bin/micromamba create -y -n myenv -f environment.yml
    wget -O install.sh https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/install.sh

    bash install.sh
    ls -la /root/.local/bin/
    ${HOME}/.local/bin/micromamba shell hook --shell
    ${HOME}/.local/bin/micromamba create -y -n myenv -f environment.yml
    

%environment
    micromamba activate myenv
%help
    Utilisation : apptainer run image.sif --option