Bootstrap: docker
From: alpine:latest

%labels
    AUTHOR Quentin Festor
    VERSION 1.0
    DESCRIPTION "test de création de sif pour computo"

%post
    apk add wget tar bzip2 bash curl
    # Étape 1: Télécharger le fichier micromamba-linux-64.tar.bz2
    wget https://github.com/mamba-org/micromamba-releases/releases/latest/download/micromamba-linux-64.tar.bz2 -O micromamba-linux-64.tar.bz2

    # Étape 2: Décompresser le fichier téléchargé
    tar -xvjf micromamba-linux-64.tar.bz2
    ls -a
    echo "ls"

    ls -a micromamba-linux-64


    # Étape 4: Créer un environnement à partir du fichier environment.yml
    micromamba-linux-64/bin/micromamba create -y -n myenv -f environment.yml


%environment
    eval "$(micromamba-linux-64/bin/micromamba shell hook --shell )"
    micromamba-linux-64/bin/micromamba activate myenv
%help
    Utilisation : apptainer run image.sif --option
