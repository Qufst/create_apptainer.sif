Bootstrap: docker
From: alpine

%help
    Container with Micromamba on Alpine Linux.

%environment
    . /opt/conda/etc/profile.d/conda.sh
    conda activate myenv

%post
    # Installer les d√©pendances
    apk update && apk add --no-cache \
        bash \
        curl \
        wget \

    # Installer Micromamba
    wget -O opt/environment.yml https://raw.githubusercontent.com/Qufst/create_apptainer.sif/main/environment.yml
    wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
    chmod +x miniconda.sh
    sha256sum miniconda.sh
    df -h
    rm -rf /opt/conda
    mkdir -p /opt/conda
    chmod -R 777 /opt/conda
    ./miniconda.sh -b -p /opt/conda
    rm Miniconda3-latest-Linux-x86_64.sh
    /opt/conda/bin/conda init
    conda activate
    conda env create -n myenv -f environment.yml
    conda update --all






