BootStrap: docker
From: r-base:4.2.2

%post
    # Update the package list and install required system dependencies
    apt-get update && apt-get install -y \
        libcurl4-openssl-dev \
        libssl-dev \
        libxml2-dev \
        libudunits2-dev \
        libgdal-dev

    # Install R packages
    R --no-echo -e 'install.packages("devtools", repos="https://cloud.r-project.org/")'
    
    # Install the 'fastai' package from GitHub
    R --no-echo -e 'devtools::install_github("microsoft/fastai")'
    
    # Run any additional commands required for the 'fastai' installation
    R --no-echo -e 'fastai::install_fastai()'

%runscript
    exec R "$@"
